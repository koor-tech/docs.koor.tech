<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Koor Documentation"><meta name=author content="Rook & Koor Storage Distribution Authors"><link href=https://docs.koor.tech/latest/Storage-Configuration/Backup-And-Recovery/ceph_file_storage_cephfs_mirroring/ rel=canonical><link rel=icon href=https://koor.tech/images/favicon.svg><meta name=generator content="mkdocs-1.4.3, mkdocs-material-8.5.10"><title>Ceph FileSystem Storage Solution Backup plan - Koor Storage Distribution Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.975780f9.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.2505c338.min.css><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=koor data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ceph-filesystem-storage-solution-backup-plan class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> This documentation is not for the latest stable version of Rook. <a href=../../../../latest-release/ > <strong>Click here for the latest release documentation.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Koor Storage Distribution Documentation" class="md-header__button md-logo" aria-label="Koor Storage Distribution Documentation" data-md-component=logo> <img src=https://koor.tech/images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Koor Storage Distribution Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Ceph FileSystem Storage Solution Backup plan </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=koor data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=koor-dark data-md-color-accent=deep-orange aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/koor-tech/koor title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../Getting-Started/intro/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../Helm-Charts/helm-charts/ class=md-tabs__link> Helm Charts </a> </li> <li class=md-tabs__item> <a href=../../Block-Storage-RBD/block-storage/ class="md-tabs__link md-tabs__link--active"> Storage Configuration </a> </li> <li class=md-tabs__item> <a href=../../../CRDs/Cluster/ceph-cluster-crd/ class=md-tabs__link> Custom Resources </a> </li> <li class=md-tabs__item> <a href=../../../Troubleshooting/krew-plugin/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../../Upgrade/health-verification/ class=md-tabs__link> Upgrade </a> </li> <li class=md-tabs__item> <a href=../../../Contributing/development-flow/ class=md-tabs__link> Contributing </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Koor Storage Distribution Documentation" class="md-nav__button md-logo" aria-label="Koor Storage Distribution Documentation" data-md-component=logo> <img src=https://koor.tech/images/logo.svg alt=logo> </a> Koor Storage Distribution Documentation </label> <div class=md-nav__source> <a href=https://github.com/koor-tech/koor title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_1 type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Getting-Started/intro/ class=md-nav__link> Rook </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/glossary/ class=md-nav__link> Glossary </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_1_3 type=checkbox id=__nav_1_3 checked> <label class=md-nav__link for=__nav_1_3> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prerequisites data-md-level=2> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Getting-Started/Prerequisites/prerequisites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/Prerequisites/authenticated-registry/ class=md-nav__link> Authenticated Container Registries </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Getting-Started/quickstart/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/storage-architecture/ class=md-nav__link> Storage Architecture </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/example-configurations/ class=md-nav__link> Example Configurations </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/ceph-openshift/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/ceph-teardown/ class=md-nav__link> Cleanup </a> </li> <li class=md-nav__item> <a href=../../../Getting-Started/release-cycle/ class=md-nav__link> Release Cycle </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Helm Charts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Helm Charts" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Helm Charts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Helm-Charts/helm-charts/ class=md-nav__link> Helm Charts Overview </a> </li> <li class=md-nav__item> <a href=../../../Helm-Charts/operator-chart/ class=md-nav__link> Ceph Operator Helm Chart </a> </li> <li class=md-nav__item> <a href=../../../Helm-Charts/ceph-cluster-chart/ class=md-nav__link> Ceph Cluster Helm Chart </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Storage Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Storage Configuration" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Storage Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1> Block Storage (RBD) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Block Storage (RBD)" data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Block Storage (RBD) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Block-Storage-RBD/block-storage/ class=md-nav__link> Block Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Block-Storage-RBD/rbd-mirroring/ class=md-nav__link> RBD Mirroring </a> </li> <li class=md-nav__item> <a href=../../Block-Storage-RBD/rbd-async-disaster-recovery-failover-failback/ class=md-nav__link> RBD Asynchronous DR Failover and Failback </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2 checked> <label class=md-nav__link for=__nav_3_2> Shared Filesystem (CephFS) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Shared Filesystem (CephFS)" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Shared Filesystem (CephFS) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Shared-Filesystem-CephFS/filesystem-storage/ class=md-nav__link> Filesystem Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Shared-Filesystem-CephFS/filesystem-mirroring/ class=md-nav__link> Filesystem Mirroring </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3> Object Storage (RGW) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Object Storage (RGW)" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Object Storage (RGW) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Object-Storage-RGW/object-storage/ class=md-nav__link> Object Storage Overview </a> </li> <li class=md-nav__item> <a href=../../Object-Storage-RGW/ceph-object-bucket-claim/ class=md-nav__link> Bucket Claim </a> </li> <li class=md-nav__item> <a href=../../Object-Storage-RGW/ceph-object-bucket-notifications/ class=md-nav__link> Object Bucket Notifications </a> </li> <li class=md-nav__item> <a href=../../Object-Storage-RGW/ceph-object-multisite/ class=md-nav__link> Object Store Multisite </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4> NFS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=NFS data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> NFS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../NFS/nfs/ class=md-nav__link> NFS Storage Overview </a> </li> <li class=md-nav__item> <a href=../../NFS/nfs-csi-driver/ class=md-nav__link> CSI provisioner and driver </a> </li> <li class=md-nav__item> <a href=../../NFS/nfs-security/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../NFS/nfs-advanced/ class=md-nav__link> Advanced configuration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5 checked> <label class=md-nav__link for=__nav_3_5> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Monitoring/ceph-dashboard/ class=md-nav__link> Ceph Dashboard </a> </li> <li class=md-nav__item> <a href=../../Monitoring/ceph-monitoring/ class=md-nav__link> Prometheus Monitoring </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6 checked> <label class=md-nav__link for=__nav_3_6> Ceph CSI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Ceph CSI" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Ceph CSI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Ceph-CSI/ceph-csi-drivers/ class=md-nav__link> Ceph CSI Drivers </a> </li> <li class=md-nav__item> <a href=../../Ceph-CSI/ceph-csi-snapshot/ class=md-nav__link> Snapshots </a> </li> <li class=md-nav__item> <a href=../../Ceph-CSI/ceph-csi-volume-clone/ class=md-nav__link> Volume clone </a> </li> <li class=md-nav__item> <a href=../../Ceph-CSI/custom-images/ class=md-nav__link> Custom Images </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ceph-teardown/ class=md-nav__link> Cleanup </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8 checked> <label class=md-nav__link for=__nav_3_8> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Advanced/ceph-configuration/ class=md-nav__link> Ceph Configuration </a> </li> <li class=md-nav__item> <a href=../../Advanced/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../Advanced/key-management-system/ class=md-nav__link> Key Management System </a> </li> <li class=md-nav__item> <a href=../../Advanced/ceph-osd-mgmt/ class=md-nav__link> Ceph OSD Management </a> </li> <li class=md-nav__item> <a href=../../Advanced/ceph-mon-health/ class=md-nav__link> Monitor Health </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9 checked> <label class=md-nav__link for=__nav_3_9> Backup And Recovery <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Backup And Recovery" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Backup And Recovery </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ceph_block_storage_rbd_mirroring/ class=md-nav__link> Ceph Block Storage Backup And Recovery </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Ceph FileSystem Storage Solution Backup plan <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Ceph FileSystem Storage Solution Backup plan </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequistes class=md-nav__link> Prerequistes </a> </li> <li class=md-nav__item> <a href=#how-to-setup class=md-nav__link> How to setup? </a> <nav class=md-nav aria-label="How to setup?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backup class=md-nav__link> Backup </a> </li> <li class=md-nav__item> <a href=#recovery class=md-nav__link> Recovery </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#results class=md-nav__link> Results </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Custom Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Custom Resources" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Custom Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1 checked> <label class=md-nav__link for=__nav_4_1> Cluster Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cluster Configuration" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Cluster Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Cluster/ceph-cluster-crd/ class=md-nav__link> CephCluster CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/host-cluster/ class=md-nav__link> Host Storage Cluster </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/pvc-cluster/ class=md-nav__link> PVC Storage Cluster </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/stretch-cluster/ class=md-nav__link> Stretch Storage Cluster </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Cluster/external-cluster/ class=md-nav__link> External Storage Cluster </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> Block Storage <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Block Storage" data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Block Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Block-Storage/ceph-block-pool-crd/ class=md-nav__link> CephBlockPool CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Block-Storage/ceph-block-pool-rados-namespace-crd/ class=md-nav__link> CephBlockPoolRados Namespace CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Block-Storage/ceph-rbd-mirror-crd/ class=md-nav__link> CephRBDMirror CRD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Shared Filesystem <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Shared Filesystem" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Shared Filesystem </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Shared-Filesystem/ceph-filesystem-crd/ class=md-nav__link> CephFilesystem CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Shared-Filesystem/ceph-fs-mirror-crd/ class=md-nav__link> CephFilesystemMirror CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Shared-Filesystem/ceph-fs-subvolumegroup-crd/ class=md-nav__link> FilesystemSubVolumeGroup CRD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4 checked> <label class=md-nav__link for=__nav_4_4> Object Storage <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Object Storage" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Object Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-store-crd/ class=md-nav__link> CephObjectStore CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-store-user-crd/ class=md-nav__link> CephObjectStoreUser CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-realm-crd/ class=md-nav__link> CephObjectRealm CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-zonegroup-crd/ class=md-nav__link> CephObjectZoneGroup CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/Object-Storage/ceph-object-zone-crd/ class=md-nav__link> CephObjectZone CRD </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../CRDs/ceph-client-crd/ class=md-nav__link> CephClient CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/ceph-nfs-crd/ class=md-nav__link> CephNFS CRD </a> </li> <li class=md-nav__item> <a href=../../../CRDs/specification/ class=md-nav__link> Specification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Troubleshooting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Troubleshooting data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Troubleshooting/krew-plugin/ class=md-nav__link> Krew Plugin </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/ceph-toolbox/ class=md-nav__link> Toolbox </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/common-issues/ class=md-nav__link> Common Issues </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/ceph-common-issues/ class=md-nav__link> Ceph Common Issues </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/ceph-csi-common-issues/ class=md-nav__link> CSI Common Issues </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/openshift-common-issues/ class=md-nav__link> OpenShift Common Issues </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/disaster-recovery/ class=md-nav__link> Disaster Recovery </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/direct-tools/ class=md-nav__link> Direct Tools </a> </li> <li class=md-nav__item> <a href=../../../Troubleshooting/performance-profiling/ class=md-nav__link> Performance Profiling </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Upgrade <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Upgrade data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Upgrade/health-verification/ class=md-nav__link> Health Verification </a> </li> <li class=md-nav__item> <a href=../../../Upgrade/rook-upgrade/ class=md-nav__link> Rook Upgrades </a> </li> <li class=md-nav__item> <a href=../../../Upgrade/ceph-upgrade/ class=md-nav__link> Ceph Upgrades </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_7 type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7> Contributing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Contributing/development-flow/ class=md-nav__link> Development Flow </a> </li> <li class=md-nav__item> <a href=../../../Contributing/development-environment/ class=md-nav__link> Developer Environment </a> </li> <li class=md-nav__item> <a href=../../../Contributing/documentation/ class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=../../../Contributing/ci-configuration/ class=md-nav__link> CI Configuration </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequistes class=md-nav__link> Prerequistes </a> </li> <li class=md-nav__item> <a href=#how-to-setup class=md-nav__link> How to setup? </a> <nav class=md-nav aria-label="How to setup?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backup class=md-nav__link> Backup </a> </li> <li class=md-nav__item> <a href=#recovery class=md-nav__link> Recovery </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#results class=md-nav__link> Results </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/koor-tech/koor/edit/master/Documentation/Storage-Configuration/Backup-And-Recovery/ceph_file_storage_cephfs_mirroring.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=ceph-filesystem-storage-solution-backup-plan>Ceph FileSystem Storage Solution Backup plan<a class=headerlink href=#ceph-filesystem-storage-solution-backup-plan title="Permanent link">&para;</a></h1> <p>We will enable CephFS mirroring on the primarily-used cluster and add a secondary (destination) as a peer to it. The resources from the primary cluster are synchronized to the secondary cluster at a scheduled time creating a snapshot of the primary filesystem. This results in regular backups, which can restored whenever needed.</p> <p>Once a successful peer is added, any volume created on the primary, shall be synchronized and backed up on the secondary, based on the schedule configured.</p> <p>Based on your data you can then configure a backup plan. A backup schedule should incrementally backup the FileSystems resources. Additionally, we advise that the integrity of the backups to be checked periodically.</p> <h2 id=prerequistes>Prerequistes<a class=headerlink href=#prerequistes title="Permanent link">&para;</a></h2> <ul> <li>You need at least 2x Rook Ceph clusters with at least 3 Nodes (for testing, you can also use <a href=https://github.com/rook/rook/blob/master/deploy/examples/cluster-test.yaml>Rook Ceph test cluster manifest</a>. The first cluster is used as the source and the second cluster will be used for mirroring CephFS data from the first one.</li> <li>For both your Rook Ceph clusters you need to make sure that they can reach each other. One of the recommended way to make sure networking is setup correctly is by enabling <a href=https://rook.io/docs/rook/v1.11/Storage-Configuration/Advanced/ceph-configuration/#use-hostnetwork-in-the-cluster-configuration>host networking</a> before you deploy the cluster.</li> <li>For resource recommendations please refer to <a href=https://rook.io/docs/rook/v1.11/CRDs/Cluster/ceph-cluster-crd/#resource-requirementslimits>the Rook Documentation</a>.</li> </ul> <h2 id=how-to-setup>How to setup?<a class=headerlink href=#how-to-setup title="Permanent link">&para;</a></h2> <h3 id=backup>Backup<a class=headerlink href=#backup title="Permanent link">&para;</a></h3> <ul> <li> <p>Have <a href=https://rook.io/docs/rook/v1.11/Storage-Configuration/Shared-Filesystem-CephFS/filesystem-mirroring/#create-the-filesystem-with-mirroring-enabled>CephFS Custom Resources Deployed with mirroring enabled</a>.</p> </li> <li> <p>We configured the mirroring schedule to create a backup every 24 hours</p> </li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ceph.rook.io/v1</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CephFilesystem</span>
<a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=nt>metadata</span><span class=p>:</span>
<a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">myfs</span>
<a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rook-ceph</span>
<a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>  </span><span class=nt>metadataPool</span><span class=p>:</span>
<a id=__codelineno-0-8 name=__codelineno-0-8></a><span class=w>    </span><span class=nt>failureDomain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>    </span><span class=nt>replicated</span><span class=p>:</span>
<a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>      </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w>  </span><span class=nt>dataPools</span><span class=p>:</span>
<a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">replicated</span>
<a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=w>      </span><span class=nt>failureDomain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=w>      </span><span class=nt>replicated</span><span class=p>:</span>
<a id=__codelineno-0-15 name=__codelineno-0-15></a><span class=w>        </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id=__codelineno-0-16 name=__codelineno-0-16></a><span class=w>  </span><span class=nt>preserveFilesystemOnDelete</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-0-17 name=__codelineno-0-17></a><span class=w>  </span><span class=nt>metadataServer</span><span class=p>:</span>
<a id=__codelineno-0-18 name=__codelineno-0-18></a><span class=w>    </span><span class=nt>activeCount</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id=__codelineno-0-19 name=__codelineno-0-19></a><span class=w>    </span><span class=nt>activeStandby</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-0-20 name=__codelineno-0-20></a><span class=w>  </span><span class=nt>mirroring</span><span class=p>:</span>
<a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=w>    </span><span class=c1># list of Kubernetes Secrets containing the peer token</span>
<a id=__codelineno-0-23 name=__codelineno-0-23></a><span class=w>    </span><span class=c1># for more details see: https://docs.ceph.com/en/latest/dev/cephfs-mirroring/#bootstrap-peers</span>
<a id=__codelineno-0-24 name=__codelineno-0-24></a><span class=w>    </span><span class=c1># Add the secret name if it already exists else specify the empty list here.</span>
<a id=__codelineno-0-25 name=__codelineno-0-25></a><span class=w>    </span><span class=nt>peers</span><span class=p>:</span>
<a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=w>      </span><span class=nt>secretNames</span><span class=p>:</span>
<a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=w>        </span><span class=c1>#- secondary-cluster-peer</span>
<a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=w>    </span><span class=c1># specify the schedule(s) on which snapshots should be taken</span>
<a id=__codelineno-0-29 name=__codelineno-0-29></a><span class=w>    </span><span class=c1># see the official syntax here https://docs.ceph.com/en/latest/cephfs/snap-schedule/#add-and-remove-schedules</span>
<a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=w>    </span><span class=nt>snapshotSchedules</span><span class=p>:</span>
<a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=hll><span class=w>        </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">24h</span><span class=w> </span><span class=c1># daily snapshots</span>
</span><a id=__codelineno-0-33 name=__codelineno-0-33></a><span class=w>        </span><span class=c1># The startTime should be mentioned in the format YYYY-MM-DDTHH:MM:SS</span>
<a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=w>        </span><span class=c1># If startTime is not specified, then by default the start time is considered as midnight UTC.</span>
<a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=w>        </span><span class=c1># see usage here https://docs.ceph.com/en/latest/cephfs/snap-schedule/#usage</span>
<a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=w>        </span><span class=c1># startTime: 2022-07-15T11:55:00</span>
<a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=w>    </span><span class=c1># manage retention policies</span>
<a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=w>    </span><span class=c1># see syntax duration here https://docs.ceph.com/en/latest/cephfs/snap-schedule/#add-and-remove-retention-policies</span>
<a id=__codelineno-0-39 name=__codelineno-0-39></a><span class=w>    </span><span class=nt>snapshotRetention</span><span class=p>:</span>
<a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=hll><span class=w>        </span><span class=nt>duration</span><span class=p>:</span><span class=w> </span><span class=s>&quot;h</span><span class=nv> </span><span class=s>24&quot;</span>
</span></code></pre></div></td></tr></table></div> <p><strong>Note</strong>: If you are using single node cluster for testing, be sure to change the replicated size to <code>1</code>.</p> <ul> <li>Deploy CephFS mirror daemon.</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=go>cluster1$ kubectl create -f deploy/examples/filesystem-mirror.yaml</span>
</code></pre></div></td></tr></table></div> <p>Once you have the filesystem and mirror daemon deployed, it should look something similar to:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span>
<span class=normal><a href=#__codelineno-2-2>2</a></span>
<span class=normal><a href=#__codelineno-2-3>3</a></span>
<span class=normal><a href=#__codelineno-2-4>4</a></span>
<span class=normal><a href=#__codelineno-2-5>5</a></span>
<span class=normal><a href=#__codelineno-2-6>6</a></span>
<span class=normal><a href=#__codelineno-2-7>7</a></span>
<span class=normal><a href=#__codelineno-2-8>8</a></span>
<span class=normal><a href=#__codelineno-2-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=go>cluster1$ kubectl get pods -A | grep fs</span>
<a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=go>rook-ceph     csi-cephfsplugin-5w6sz                                        2/2     Running     0               41d</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=go>rook-ceph     csi-cephfsplugin-btxxs                                        2/2     Running     0               41d</span>
<a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=go>rook-ceph     csi-cephfsplugin-provisioner-75875b5887-k6h8n                 5/5     Running     0               41d</span>
<a id=__codelineno-2-5 name=__codelineno-2-5></a><span class=go>rook-ceph     csi-cephfsplugin-provisioner-75875b5887-w2vqg                 5/5     Running     0               5d1h</span>
<a id=__codelineno-2-6 name=__codelineno-2-6></a><span class=go>rook-ceph     csi-cephfsplugin-q9929                                        2/2     Running     0               41d</span>
<a id=__codelineno-2-7 name=__codelineno-2-7></a><span class=go>rook-ceph     rook-ceph-fs-mirror-7c87686cd7-9dl9n                          2/2     Running     1 (4d15h ago)   4d15h</span>
<a id=__codelineno-2-8 name=__codelineno-2-8></a><span class=go>rook-ceph     rook-ceph-mds-myfs-a-866fc7c5bd-zkw45                         2/2     Running     40 (33h ago)    37d</span>
<a id=__codelineno-2-9 name=__codelineno-2-9></a><span class=go>rook-ceph     rook-ceph-mds-myfs-b-8584dc6bbf-tl7bg                         2/2     Running     42 (33h ago)    37d</span>
</code></pre></div></td></tr></table></div> <p>The steps to configure secondary cluster as a peer can be found <a href=https://rook.io/docs/rook/v1.11/Storage-Configuration/Shared-Filesystem-CephFS/filesystem-mirroring/#import-the-token-in-the-destination-cluster>here</a>.</p> <p>Please verify the peer setup using the <a href=https://rook.io/docs/rook/v1.11/Troubleshooting/ceph-toolbox/ >toolbox pod</a>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1> 1</a></span>
<span class=normal><a href=#__codelineno-3-2> 2</a></span>
<span class=normal><a href=#__codelineno-3-3> 3</a></span>
<span class=normal><a href=#__codelineno-3-4> 4</a></span>
<span class=normal><a href=#__codelineno-3-5> 5</a></span>
<span class=normal><a href=#__codelineno-3-6> 6</a></span>
<span class=normal><a href=#__codelineno-3-7> 7</a></span>
<span class=normal><a href=#__codelineno-3-8> 8</a></span>
<span class=normal><a href=#__codelineno-3-9> 9</a></span>
<span class=normal><a href=#__codelineno-3-10>10</a></span>
<span class=normal><a href=#__codelineno-3-11>11</a></span>
<span class=normal><a href=#__codelineno-3-12>12</a></span>
<span class=normal><a href=#__codelineno-3-13>13</a></span>
<span class=normal><a href=#__codelineno-3-14>14</a></span>
<span class=normal><a href=#__codelineno-3-15>15</a></span>
<span class=normal><a href=#__codelineno-3-16>16</a></span>
<span class=normal><a href=#__codelineno-3-17>17</a></span>
<span class=normal><a href=#__codelineno-3-18>18</a></span>
<span class=normal><a href=#__codelineno-3-19>19</a></span>
<span class=normal><a href=#__codelineno-3-20>20</a></span>
<span class=normal><a href=#__codelineno-3-21>21</a></span>
<span class=normal><a href=#__codelineno-3-22>22</a></span>
<span class=normal><a href=#__codelineno-3-23>23</a></span>
<span class=normal><a href=#__codelineno-3-24>24</a></span>
<span class=normal><a href=#__codelineno-3-25>25</a></span>
<span class=normal><a href=#__codelineno-3-26>26</a></span>
<span class=normal><a href=#__codelineno-3-27>27</a></span>
<span class=normal><a href=#__codelineno-3-28>28</a></span>
<span class=normal><a href=#__codelineno-3-29>29</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=go>cluster1$ kubectl exec -it -n rook-ceph deploy/rook-ceph-tools -- bash</span>
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=go>cluster1$ ceph fs snapshot mirror daemon status | jq</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=go>[</span>
<a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=go>  {</span>
<a id=__codelineno-3-5 name=__codelineno-3-5></a><span class=go>    &quot;daemon_id&quot;: 6034805,</span>
<a id=__codelineno-3-6 name=__codelineno-3-6></a><span class=go>    &quot;filesystems&quot;: [</span>
<a id=__codelineno-3-7 name=__codelineno-3-7></a><span class=go>      {</span>
<a id=__codelineno-3-8 name=__codelineno-3-8></a><span class=go>        &quot;filesystem_id&quot;: 1,</span>
<a id=__codelineno-3-9 name=__codelineno-3-9></a><span class=go>        &quot;name&quot;: &quot;myfs&quot;,</span>
<a id=__codelineno-3-10 name=__codelineno-3-10></a><span class=go>        &quot;directory_count&quot;: 3,</span>
<a id=__codelineno-3-11 name=__codelineno-3-11></a><span class=go>        &quot;peers&quot;: [</span>
<a id=__codelineno-3-12 name=__codelineno-3-12></a><span class=go>          {</span>
<a id=__codelineno-3-13 name=__codelineno-3-13></a><span class=go>            &quot;uuid&quot;: &quot;b92286db-7ee0-40b4-88dd-1ff87d347569&quot;,</span>
<a id=__codelineno-3-14 name=__codelineno-3-14></a><span class=go>            &quot;remote&quot;: {</span>
<a id=__codelineno-3-15 name=__codelineno-3-15></a><span class=go>              &quot;client_name&quot;: &quot;client.mirror&quot;,</span>
<a id=__codelineno-3-16 name=__codelineno-3-16></a><span class=go>              &quot;cluster_name&quot;: &quot;e7f2c11a-3cea-436c-aa8b-b8b62f93814f&quot;,</span>
<a id=__codelineno-3-17 name=__codelineno-3-17></a><span class=go>              &quot;fs_name&quot;: &quot;myfs&quot;</span>
<a id=__codelineno-3-18 name=__codelineno-3-18></a><span class=go>            },</span>
<a id=__codelineno-3-19 name=__codelineno-3-19></a><span class=go>            &quot;stats&quot;: {</span>
<a id=__codelineno-3-20 name=__codelineno-3-20></a><span class=go>              &quot;failure_count&quot;: 0,</span>
<a id=__codelineno-3-21 name=__codelineno-3-21></a><span class=go>              &quot;peer_init_failed&quot;: true,</span>
<a id=__codelineno-3-22 name=__codelineno-3-22></a><span class=go>              &quot;recovery_count&quot;: 0</span>
<a id=__codelineno-3-23 name=__codelineno-3-23></a><span class=go>            }</span>
<a id=__codelineno-3-24 name=__codelineno-3-24></a><span class=go>          }</span>
<a id=__codelineno-3-25 name=__codelineno-3-25></a><span class=go>        ]</span>
<a id=__codelineno-3-26 name=__codelineno-3-26></a><span class=go>      }</span>
<a id=__codelineno-3-27 name=__codelineno-3-27></a><span class=go>    ]</span>
<a id=__codelineno-3-28 name=__codelineno-3-28></a><span class=go>  }</span>
<a id=__codelineno-3-29 name=__codelineno-3-29></a><span class=go>]</span>
</code></pre></div></td></tr></table></div> <p>Once CephFS peer is set up, you can test the mirroring by creating a test volume:</p> <p>On the primary cluster,</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1>1</a></span>
<span class=normal><a href=#__codelineno-4-2>2</a></span>
<span class=normal><a href=#__codelineno-4-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=go>cluster1$ kubectl exec -n rook-ceph deploy/rook-ceph-tools -t -- ceph fs subvolume create myfs testsubvolume</span>
<a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=go>cluster1$ kubectl exec -n rook-ceph deploy/rook-ceph-tools -t -- ceph fs snapshot mirror enable myfs</span>
<a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=go>cluster1$ kubectl exec -n rook-ceph deploy/rook-ceph-tools -t -- ceph fs snapshot mirror add myfs /volumes/_nogroup/testsubvolume/</span>
</code></pre></div></td></tr></table></div> <p>On the destination (secondary) cluster:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1>1</a></span>
<span class=normal><a href=#__codelineno-5-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=go>cluster2$ kubectl exec -n rook-ceph deploy/rook-ceph-tools -t -- ceph fs subvolume create myfs testsubvolume</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a><span class=go>cluster2$ kubectl exec -n rook-ceph deploy/rook-ceph-tools -t -- ceph fs snapshot mirror enable myfs</span>
</code></pre></div></td></tr></table></div> <p>We uploaded a 10 GB test data file to this filesystem and then checked the data integrity of the file on primary cluster, by noting the checksum of the file on the primary, we will use this to verify the file on secondary cluster later on.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1> 1</a></span>
<span class=normal><a href=#__codelineno-6-2> 2</a></span>
<span class=normal><a href=#__codelineno-6-3> 3</a></span>
<span class=normal><a href=#__codelineno-6-4> 4</a></span>
<span class=normal><a href=#__codelineno-6-5> 5</a></span>
<span class=normal><a href=#__codelineno-6-6> 6</a></span>
<span class=normal><a href=#__codelineno-6-7> 7</a></span>
<span class=normal><a href=#__codelineno-6-8> 8</a></span>
<span class=normal><a href=#__codelineno-6-9> 9</a></span>
<span class=normal><a href=#__codelineno-6-10>10</a></span>
<span class=normal><a href=#__codelineno-6-11>11</a></span>
<span class=normal><a href=#__codelineno-6-12>12</a></span>
<span class=normal><a href=#__codelineno-6-13>13</a></span>
<span class=normal><a href=#__codelineno-6-14>14</a></span>
<span class=normal><a href=#__codelineno-6-15>15</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=gp># </span>Create<span class=w> </span>the<span class=w> </span>directory
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=go>mkdir /tmp/testsubvolume</span>
<a id=__codelineno-6-3 name=__codelineno-6-3></a>
<a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=gp># </span>Detect<span class=w> </span>the<span class=w> </span>mon<span class=w> </span>endpoints<span class=w> </span>and<span class=w> </span>the<span class=w> </span>user<span class=w> </span>secret<span class=w> </span><span class=k>for</span><span class=w> </span>the<span class=w> </span>connection
<a id=__codelineno-6-5 name=__codelineno-6-5></a><span class=go>mon_endpoints=$(grep mon_host /etc/ceph/ceph.conf | awk &#39;{print $3}&#39;)</span>
<a id=__codelineno-6-6 name=__codelineno-6-6></a><span class=go>my_secret=$(grep key /etc/ceph/keyring | awk &#39;{print $3}&#39;)</span>
<a id=__codelineno-6-7 name=__codelineno-6-7></a>
<a id=__codelineno-6-8 name=__codelineno-6-8></a><span class=gp># </span>Mount<span class=w> </span>the<span class=w> </span>filesystem
<a id=__codelineno-6-9 name=__codelineno-6-9></a><span class=go>mount -t ceph -o mds_namespace=myfs,name=admin,secret=$my_secret $mon_endpoints:/ /tmp/testsubvolume</span>
<a id=__codelineno-6-10 name=__codelineno-6-10></a>
<a id=__codelineno-6-11 name=__codelineno-6-11></a><span class=gp># </span>See<span class=w> </span>your<span class=w> </span>mounted<span class=w> </span>filesystem
<a id=__codelineno-6-12 name=__codelineno-6-12></a><span class=go>df -h</span>
<a id=__codelineno-6-13 name=__codelineno-6-13></a>
<a id=__codelineno-6-14 name=__codelineno-6-14></a><span class=gp>$ </span>md5sum<span class=w> </span>testsubvolume/sample.txt
<a id=__codelineno-6-15 name=__codelineno-6-15></a><span class=go>903100bd055574d2bce7b60a054e9751  testsubvolume/sample.txt</span>
</code></pre></div></td></tr></table></div> <p>The snapshot would be created on the scheduled interval but for testing you can create a snapshots and verify if the snap sync is completed.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=go>cluster2$ kubectl exec -n rook-ceph deploy/rook-ceph-tools -t -- ceph fs subvolume snapshot create myfs testsubvolume snap3</span>
</code></pre></div></td></tr></table></div> <p>On the secondary, we verify if these snapshots got synced.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span>
<span class=normal><a href=#__codelineno-8-15>15</a></span>
<span class=normal><a href=#__codelineno-8-16>16</a></span>
<span class=normal><a href=#__codelineno-8-17>17</a></span>
<span class=normal><a href=#__codelineno-8-18>18</a></span>
<span class=normal><a href=#__codelineno-8-19>19</a></span>
<span class=normal><a href=#__codelineno-8-20>20</a></span>
<span class=normal><a href=#__codelineno-8-21>21</a></span>
<span class=normal><a href=#__codelineno-8-22>22</a></span>
<span class=normal><a href=#__codelineno-8-23>23</a></span>
<span class=normal><a href=#__codelineno-8-24>24</a></span>
<span class=normal><a href=#__codelineno-8-25>25</a></span>
<span class=normal><a href=#__codelineno-8-26>26</a></span>
<span class=normal><a href=#__codelineno-8-27>27</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=go>cluster2$ ceph --admin-daemon /var/run/ceph/ceph-client.fs-mirror.11.94285354653568.asok fs mirror peer status myfs@1 64b01275-ee93-4b5b-a9d4-bda551ef4db0</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=go>{</span>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=go>    &quot;/volumes/_nogroup/testsubvolume&quot;: {</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=go>        &quot;state&quot;: &quot;idle&quot;,</span>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=go>        &quot;last_synced_snap&quot;: {</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=go>            &quot;id&quot;: 5,</span>
<a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=go>            &quot;name&quot;: &quot;snap3&quot;,</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=go>            &quot;sync_duration&quot;: 0.12599942,</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=go>            &quot;sync_time_stamp&quot;: &quot;752855.084361s&quot;</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a><span class=go>        },</span>
<a id=__codelineno-8-11 name=__codelineno-8-11></a><span class=go>        &quot;snaps_synced&quot;: 1,</span>
<a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=go>        &quot;snaps_deleted&quot;: 0,</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=go>        &quot;snaps_renamed&quot;: 0</span>
<a id=__codelineno-8-14 name=__codelineno-8-14></a><span class=go>    },</span>
<a id=__codelineno-8-15 name=__codelineno-8-15></a><span class=go>    &quot;/volumes/_nogroup/testsubvolume2&quot;: {</span>
<a id=__codelineno-8-16 name=__codelineno-8-16></a><span class=go>        &quot;state&quot;: &quot;idle&quot;,</span>
<a id=__codelineno-8-17 name=__codelineno-8-17></a><span class=go>        &quot;last_synced_snap&quot;: {</span>
<a id=__codelineno-8-18 name=__codelineno-8-18></a><span class=go>            &quot;id&quot;: 9,</span>
<a id=__codelineno-8-19 name=__codelineno-8-19></a><span class=go>            &quot;name&quot;: &quot;snap3&quot;,</span>
<a id=__codelineno-8-20 name=__codelineno-8-20></a><span class=go>            &quot;sync_duration&quot;: 0.11599946799999999,</span>
<a id=__codelineno-8-21 name=__codelineno-8-21></a><span class=go>            &quot;sync_time_stamp&quot;: &quot;755966.611134s&quot;</span>
<a id=__codelineno-8-22 name=__codelineno-8-22></a><span class=go>        },</span>
<a id=__codelineno-8-23 name=__codelineno-8-23></a><span class=go>        &quot;snaps_synced&quot;: 1,</span>
<a id=__codelineno-8-24 name=__codelineno-8-24></a><span class=go>        &quot;snaps_deleted&quot;: 0,</span>
<a id=__codelineno-8-25 name=__codelineno-8-25></a><span class=go>        &quot;snaps_renamed&quot;: 0</span>
<a id=__codelineno-8-26 name=__codelineno-8-26></a><span class=go>    }</span>
<a id=__codelineno-8-27 name=__codelineno-8-27></a><span class=go>}</span>
</code></pre></div></td></tr></table></div> <p>We see, snap sync count got incremented, we will be able to see a persistent volume got created on the secondary cluster.</p> <p>Now we verify on the secondary(destination) cluster, the checksum of the file after volume mount we verify if the snapshot after file being written got synchronized...</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1> 1</a></span>
<span class=normal><a href=#__codelineno-9-2> 2</a></span>
<span class=normal><a href=#__codelineno-9-3> 3</a></span>
<span class=normal><a href=#__codelineno-9-4> 4</a></span>
<span class=normal><a href=#__codelineno-9-5> 5</a></span>
<span class=normal><a href=#__codelineno-9-6> 6</a></span>
<span class=normal><a href=#__codelineno-9-7> 7</a></span>
<span class=normal><a href=#__codelineno-9-8> 8</a></span>
<span class=normal><a href=#__codelineno-9-9> 9</a></span>
<span class=normal><a href=#__codelineno-9-10>10</a></span>
<span class=normal><a href=#__codelineno-9-11>11</a></span>
<span class=normal><a href=#__codelineno-9-12>12</a></span>
<span class=normal><a href=#__codelineno-9-13>13</a></span>
<span class=normal><a href=#__codelineno-9-14>14</a></span>
<span class=normal><a href=#__codelineno-9-15>15</a></span>
<span class=normal><a href=#__codelineno-9-16>16</a></span>
<span class=normal><a href=#__codelineno-9-17>17</a></span>
<span class=normal><a href=#__codelineno-9-18>18</a></span>
<span class=normal><a href=#__codelineno-9-19>19</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=gp># </span>Enter<span class=w> </span>into<span class=w> </span>toolbox<span class=w> </span>or<span class=w> </span>direct<span class=w> </span>mount<span class=w> </span>pod
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=go>cluster2$ kubectl exec -it -n rook-ceph deploy/rook-ceph-tools -- bash</span>
<a id=__codelineno-9-3 name=__codelineno-9-3></a>
<a id=__codelineno-9-4 name=__codelineno-9-4></a><span class=gp># </span>Create<span class=w> </span>the<span class=w> </span>directory
<a id=__codelineno-9-5 name=__codelineno-9-5></a><span class=go>mkdir /tmp/testsubvolume</span>
<a id=__codelineno-9-6 name=__codelineno-9-6></a>
<a id=__codelineno-9-7 name=__codelineno-9-7></a><span class=gp># </span>Detect<span class=w> </span>the<span class=w> </span>mon<span class=w> </span>endpoints<span class=w> </span>and<span class=w> </span>the<span class=w> </span>user<span class=w> </span>secret<span class=w> </span><span class=k>for</span><span class=w> </span>the<span class=w> </span>connection
<a id=__codelineno-9-8 name=__codelineno-9-8></a><span class=go>mon_endpoints=$(grep mon_host /etc/ceph/ceph.conf | awk &#39;{print $3}&#39;)</span>
<a id=__codelineno-9-9 name=__codelineno-9-9></a><span class=go>my_secret=$(grep key /etc/ceph/keyring | awk &#39;{print $3}&#39;)</span>
<a id=__codelineno-9-10 name=__codelineno-9-10></a>
<a id=__codelineno-9-11 name=__codelineno-9-11></a><span class=gp># </span>Mount<span class=w> </span>the<span class=w> </span>filesystem
<a id=__codelineno-9-12 name=__codelineno-9-12></a><span class=go>mount -t ceph -o mds_namespace=myfs,name=admin,secret=$my_secret $mon_endpoints:/ /tmp/testsubvolume</span>
<a id=__codelineno-9-13 name=__codelineno-9-13></a>
<a id=__codelineno-9-14 name=__codelineno-9-14></a><span class=gp># </span>See<span class=w> </span>your<span class=w> </span>mounted<span class=w> </span>filesystem
<a id=__codelineno-9-15 name=__codelineno-9-15></a><span class=go>df -h</span>
<a id=__codelineno-9-16 name=__codelineno-9-16></a>
<a id=__codelineno-9-17 name=__codelineno-9-17></a><span class=gp># </span>verify<span class=w> </span>checksum<span class=w> </span>of<span class=w> </span>the<span class=w> </span>file<span class=w> </span>synchronized<span class=w> </span>with<span class=w> </span>filesystem
<a id=__codelineno-9-18 name=__codelineno-9-18></a><span class=gp>$ </span>md5sum<span class=w> </span>testsubvolume/sample.txt
<a id=__codelineno-9-19 name=__codelineno-9-19></a><span class=go>903100bd055574d2bce7b60a054e9751  testsubvolume/sample.txt</span>
</code></pre></div></td></tr></table></div> <p>To verify the data, we followed the steps to mount the volume using direct mount pod, which can be found in detail on the Rook Documentation <a href=https://rook.io/docs/rook/v1.11/Troubleshooting/direct-tools/#shared-filesystem-tools>here</a>.</p> <p>Voil! We have successfully configured backup for Rook Ceph Persistent Volumes using CephFS mirroring.</p> <h3 id=recovery>Recovery<a class=headerlink href=#recovery title="Permanent link">&para;</a></h3> <p>In case of any failure (disaster), since CephFS mirroring is a one way mirroring you would need to remove the existing peer, and reverse the roles i.e. make the destination cluster new primary and primary, the destination, so that we can sync back the snapshots. This sounds tedious but is a simple process that can be used at the time of restoration.</p> <p>From the <a href=https://rook.io/docs/rook/v1.11/Troubleshooting/ceph-toolbox/ >toolbox pod</a> run the following commands.</p> <ul> <li>Unlink the disaster struck primary (cluster1) peer from the secondary cluster.</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span>
<span class=normal><a href=#__codelineno-10-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=go>cluster2$ ceph fs snapshot mirror peer_remove myfs &lt;peer_uuid&gt;</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=gp># </span>verify<span class=w> </span>from<span class=w> </span>peer<span class=w> </span>list
<a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=go>cluster2$ ceph fs snapshot mirror peer_list myfs</span>
</code></pre></div></td></tr></table></div> <ul> <li>Bring back the disaster struck primary (cluster1) to healthy state and make it secondary by adding it as a peer for the current primary (cluster2).</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=go>cluster2$ ceph fs snapshot mirror peer_bootstrap create myfs client.admin</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=go>{&quot;token&quot;: &quot;eyJmc2lkIjogIjBkZjE3MjE3LWRmY2QtNDAzMC05MDc5LTM2Nzk4NTVkNDJlZiIsICJmaWxlc3lzdGVtIjogImJhY2t1cF9mcyIsICJ1c2VyIjogImNsaWVudC5taXJyb3JfcGVlcl9ib290c3RyYXAiLCAic2l0ZV9uYW1lIjogInNpdGUtcmVtb3RlIiwgImtleSI6ICJBUUFhcDBCZ0xtRmpOeEFBVnNyZXozai9YYUV0T2UrbUJEZlJDZz09IiwgIm1vbl9ob3N0IjogIlt2MjoxOTIuMTY4LjAuNTo0MDkxOCx2MToxOTIuMTY4LjAuNTo0MDkxOV0ifQ==&quot;}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=go>cluster1$ ceph fs snapshot mirror peer_bootstrap import myfs eyJmc2lkIjogIjBkZjE3MjE3LWRmY2QtNDAzMC05MDc5LTM2Nzk4NTVkNDJlZiIsICJmaWxlc3lzdGVtIjogImJhY2t1cF9mcyIsICJ1c2VyIjogImNsaWVudC5taXJyb3JfcGVlcl9ib290c3RyYXAiLCAic2l0ZV9uYW1lIjogInNpdGUtcmVtb3RlIiwgImtleSI6ICJBUUFhcDBCZ0xtRmpOeEFBV      nNyZXozai9YYUV0T2UrbUJEZlJDZz09IiwgIm1vbl9ob3N0IjogIlt2MjoxOTIuMTY4LjAuNTo0MDkxOCx2MToxOTIuMTY4LjAuNTo0MDkxOV0i</span>
</code></pre></div></td></tr></table></div> <ul> <li>Verify peer on cluster2(current primary) that cluster1 was successfully added as the peer.</li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=go>cluster1$ ceph fs snapshot mirror peer_list myfs</span>
</code></pre></div></td></tr></table></div> <ul> <li> <p>After the peer is configured, the snapshots should be synchronized back to the previous primary(cluster1), you should be able to see Persistent Volumes created on cluster1.</p> </li> <li> <p>Once you are sure all the resources are synchronized back to cluster1(current secondary), you can remove the peer and make current secondary(cluster1) back the primary and cluster2 can be peered back to resume backup on them. Please ensure, the recovery be performed ensuring the primary cluster where we are restoring backups is in healthy state.</p> </li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1> 1</a></span>
<span class=normal><a href=#__codelineno-14-2> 2</a></span>
<span class=normal><a href=#__codelineno-14-3> 3</a></span>
<span class=normal><a href=#__codelineno-14-4> 4</a></span>
<span class=normal><a href=#__codelineno-14-5> 5</a></span>
<span class=normal><a href=#__codelineno-14-6> 6</a></span>
<span class=normal><a href=#__codelineno-14-7> 7</a></span>
<span class=normal><a href=#__codelineno-14-8> 8</a></span>
<span class=normal><a href=#__codelineno-14-9> 9</a></span>
<span class=normal><a href=#__codelineno-14-10>10</a></span>
<span class=normal><a href=#__codelineno-14-11>11</a></span>
<span class=normal><a href=#__codelineno-14-12>12</a></span>
<span class=normal><a href=#__codelineno-14-13>13</a></span>
<span class=normal><a href=#__codelineno-14-14>14</a></span>
<span class=normal><a href=#__codelineno-14-15>15</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1></a><span class=go>cluster1$ kubectl exec -n rook-ceph deploy/ceph-fs-mirror -- bash</span>
<a id=__codelineno-14-2 name=__codelineno-14-2></a><span class=go>cluster1$ ls /var/run/ceph/</span>
<a id=__codelineno-14-3 name=__codelineno-14-3></a><span class=go>ceph-client.fs-mirror.11.94285354653568.asok</span>
<a id=__codelineno-14-4 name=__codelineno-14-4></a><span class=go>cluster1$  ceph --admin-daemon /var/run/ceph/ceph-client.fs-mirror.11.94285354653568.asok fs mirror peer status myfs@1 64b01275-ee93-4b5b-a9d4-bda551ef4db0</span>
<a id=__codelineno-14-5 name=__codelineno-14-5></a><span class=go>    &quot;/volumes/_nogroup/testsubvolume&quot;: {</span>
<a id=__codelineno-14-6 name=__codelineno-14-6></a><span class=go>        &quot;state&quot;: &quot;idle&quot;,</span>
<a id=__codelineno-14-7 name=__codelineno-14-7></a><span class=go>        &quot;last_synced_snap&quot;: {</span>
<a id=__codelineno-14-8 name=__codelineno-14-8></a><span class=go>            &quot;id&quot;: 26,</span>
<a id=__codelineno-14-9 name=__codelineno-14-9></a><span class=go>            &quot;name&quot;: &quot;snap3&quot;,</span>
<a id=__codelineno-14-10 name=__codelineno-14-10></a><span class=go>            &quot;sync_duration&quot;: 89.813304341000006,</span>
<a id=__codelineno-14-11 name=__codelineno-14-11></a><span class=go>            &quot;sync_time_stamp&quot;: &quot;772137.092616s&quot;</span>
<a id=__codelineno-14-12 name=__codelineno-14-12></a><span class=go>        },</span>
<a id=__codelineno-14-13 name=__codelineno-14-13></a><span class=go>        &quot;snaps_synced&quot;: 1,</span>
<a id=__codelineno-14-14 name=__codelineno-14-14></a><span class=go>        &quot;snaps_deleted&quot;: 0,</span>
<a id=__codelineno-14-15 name=__codelineno-14-15></a><span class=go>        &quot;snaps_renamed&quot;: 0</span>
</code></pre></div></td></tr></table></div> <h2 id=results>Results<a class=headerlink href=#results title="Permanent link">&para;</a></h2> <p>We ran Rook Ceph on hardware, with 16GB of RAM on each of the 3 nodes. The result was an effortless and successful synchronization of the CephFS Persistent Volumes with the sample data integrity intact, it took around 89 sec for a snapshot to be synchronized.</p> <p><strong>Note</strong>: The results may vary depending on the hardware used and network bandwidth of the cluster, along with other factors.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ceph_block_storage_rbd_mirroring/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Ceph Block Storage Backup And Recovery" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Ceph Block Storage Backup And Recovery </div> </div> </a> <a href=../../../CRDs/Cluster/ceph-cluster-crd/ class="md-footer__link md-footer__link--next" aria-label="Next: CephCluster CRD" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> CephCluster CRD </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 Rook & Koor Storage Distribution Authors All Rights Reserved. <br> Rook is a trademark of The Linux Foundation. <br> Ceph is a trademark or registered trademark of Red Hat, Inc. or its subsidiaries in the United States and other countries. <br> All trademarks are property of their respective owners in the US and other countries. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://twitter.com/koor_tech target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://koor.tech/blog/ target=_blank rel=noopener title=koor.tech class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg> </a> <a href=https://github.com/koor-tech/koor/discussions target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9C448 134.3 348.6 32 225.9 32zM224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.tabs.link", "instant", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "tabs"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest-release", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.5a2dcb6a.min.js></script> </body> </html>